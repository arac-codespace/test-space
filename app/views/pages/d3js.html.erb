 <!--CIRCLE WITH TOOLTIP EXAMPLE-->
<div class="example_div"></div>

<script type="text/javascript">
  var tooltip = d3.select("body")
  	.append("div")
  	.style("position", "absolute")
  	.style("z-index", "10")
  	.style("visibility", "hidden")
  	.text("a simple tooltip");
  	
  var sampleSVG = d3.select(".example_div")
  	.append("svg:svg")
  	.attr("class", "sample")
  	.attr("width", 300)
  	.attr("height", 300);    
  	
  d3.select(".example_div svg")
  	.append("svg:circle")
  	.attr("stroke", "black")
  	.attr("fill", "aliceblue")
  	.attr("r", 50)
  	.attr("cx", 52)
  	.attr("cy", 52)
  	.on("mouseover", function(){return tooltip.style("visibility", "visible");})
  	.on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
  	.on("mouseout", function(){return tooltip.style("visibility", "hidden");});

</script>


<div class='main'></div>

<script type='text/javascript'>
  var svg = d3.select('.main').append('svg');
  svg.attr('width', 600).attr('height',300);

  var y = d3.scaleLinear().domain([15,90]).range([250,0]);  
  var x = d3.scaleLog().domain([250,100000]).range([0,600]);
  var r = d3.scaleSqrt().domain([52070, 1380000000]).range([10, 40]);  
  
  svg.append('circle').attr('r', r(1380000000)).attr('fill','red').attr('cx', x(13330)).attr('cy', y(77));
  
</script>


</br>


<!--<svg class="iechart"></svg>-->

<!--<script>-->

<!--  var width = 420,-->
<!--      barHeight = 20;-->
  
<!--  var x = d3.scaleLinear()-->
<!--      .range([0, width]);-->
  
<!--  var iechart = d3.select(".iechart")-->
<!--      .attr("width", width);-->
  
<!--  var data = 'https://rails-experiment-arac00codespace.c9users.io/data/load';-->
<!--  data.parse-->
  
<!--  d3.json( data, function(error, data) {-->
<!--    x.domain([0, d3.max(data, function(d) { return d.value; })]);-->
  
<!--    iechart.attr("height", barHeight * data.length);-->
  
<!--    var bar = iechart.selectAll("g")-->
<!--        .data(data)-->
<!--      .enter().append("g")-->
<!--        .attr("transform", function(d, i) { return "translate(0," + i * barHeight + ")"; });-->
  
<!--    bar.append("rect")-->
<!--        .attr("width", function(d) { return x(d.value); })-->
<!--        .attr("height", barHeight - 1);-->
  
<!--    bar.append("text")-->
<!--        .attr("x", function(d) { return x(d.value) - 3; })-->
<!--        .attr("y", barHeight / 2)-->
<!--        .attr("dy", ".35em")-->
<!--        .text(function(d) { return d.value; });-->
<!--  });-->
  
  <!--// No need for this function when dealing with json!-->
  <!--// function type(d) {-->
  <!--//   d.value = +d.value; // coerce to number-->
  <!--//   return d;-->
  <!--// }-->

</script>


</br>

<svg class='stratChart'></svg>

<script>

var width = 800;
var height = 1000;

var x = d3.scaleLinear()
    .range([0, width]);
    
var y = d3.scaleLinear()
  .range([0, 1000])
  
var stratChart = d3.select(".stratChart")
    .attr("width", width)

var sumPrevThickness = 0;

function drawchart(data){

  var totalThickness = d3.sum(data, function(d) { return d.Thickness} );

  stratChart.attr('height', height);

  x.domain([0, d3.max(data, function(d) { return d.Rock_Type; })]);
  
  y.domain([0, totalThickness]);
  
  for(var i = 0; i < data.length; i++) { data[i].previous = data[i-1]; }

  var bar = stratChart.selectAll("g")
    .data(data)
    .enter().append("g")
    .attr("transform", function(d, i) { 
      
      var prevThickness;

      if (i > 0) { prevThickness = d.previous.Thickness}
      else { prevThickness = 0};
    // debugger;
    
    sumPrevThickness += prevThickness;
    // debugger;
    
    return "translate(0," + y(sumPrevThickness) + ")"; 
    });
    
    
  bar.append("rect")
      .attr("width", function(d) { return x(d.Rock_Type); })
      .attr("height", function(d) { return y(d.Thickness); });

  // bar.append("text")
  //     .attr("x", function(d) { return x(d.Rock_Type) - 3; })
  //     .attr("y", barHeight / 2)
  //     .attr("dy", ".35em")
  //     .text(function(d) { return d.unit_id; });    

};
  
stratdata = d3.json('/data/stratdata.json', drawchart);

	
	
</script>